{% extends "@RocketSellerTwoPick/BackOffice/backOfficeBase.html.twig" %}

{% block title %}Tramites{% endblock %}

{% block fos_user_content %}
    <div id="main" class="col-sm-15">
        <div class="col-md-10">
            <div class="panel panel-title">
                Tramites
            </div>
            <br>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4>Tramites Pendientes</h4>
                </div>
                {% if order is not defined %}
                    {% set order = 'ASC' %}
                {% endif %}
                {% if order == 'ASC' %}
                    {% set order = 'DESC' %}
                {% else %}
                    {% set order = 'ASC' %}
                {% endif %}
                <table class="table">
                    <thead>
                        <tr>
                            <th style="vertical-align: middle" rowspan="2">
                                <a id="orderByName" class ='notAjax' href="{{ path('show_procedures',{'orderType':'name','order':order}) }}">Empleador</a>
                            </th>
                            <th style="vertical-align: middle" rowspan="2">
                            <a id="orderByName" class ='notAjax' href="{{ path('show_procedures',{'orderType':'document','order':order}) }}">Cedula</a>
                            </th>
                            <th style="vertical-align: middle" rowspan="2">Tipo de Tramite</th>
                            <th style="vertical-align: middle" rowspan="2">estado</th>
                            <th style="vertical-align: middle" rowspan="2">
                                <a id="orderByName" class ='notAjax' href="{{ path('show_procedures',{'orderType':'date','order':order}) }}">Fecha Pago</a>
                            </th>
                            <th style="vertical-align: middle" rowspan="2">Accion</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for procedure in procedures %}
                        <tr>
                            <td>{{ procedure.employerEmployer.personPerson.fullName}}</td>
                            <td>{{ procedure.employerEmployer.personPerson.document}}</td>
                            <td>{{ procedure.procedureTypeProcedureType.name }}</td>
                            {#{% set pendientes =  procedure.employerEmployer.toFinish %}#}
                            {% set estado =  procedure.employerEmployer.status %}
                            <td {%  if  estado == 2 %}
                                    style="color: #9C2F2F"
                                {% elseif estado == 1 %}
                                    style="color: #666666"
                                {% elseif estado == 0 %}
                                    style="color: black"
                                {% elseif estado == 3 %}
                                    style="color: #d59401"
                                {% elseif estado == 4 %}
                                    style="color: #008800"
                                {% elseif estado == 5 %}
                                    style="color: #008800"
                                {% endif %}
                            >{%  if  estado == 2 %}
                                    Error
                                {% elseif estado == 1 %}
                                    En tramite
                                {% elseif estado == 0 %}
                                    Nuevo
                                {% elseif estado == 3 %}
                                    Corregido
                                {% elseif estado == 4 %}
                                    Terminado
                                {% elseif estado == 5 %}
                                    Contrato Validado
                                {% endif %}</td>
                            <td>{{ procedure.createdAt|date('y-m-d h:i:s a') }}</td>
                            <td><a class="notAjax" href="{{ path('show_procedure',{'procedureId':procedure.idProcedure})}}">Ver</a></td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-sm-2" id="form_procedures" style="margin-top: 30px">
            {{ form_start(form) }}
            {{ form_end(form) }}
        </div>
        <br>
    </div>
{% endblock %}
