{% extends "::base.html.twig" %}
{% block fos_user_content %}
    {% if app.user.status is defined%}
        {% set status = app.user.status %}
    {% else %}
        {% set status = 0 %}
    {% endif %}
    <div class="row">
        <div class="col-sm-12 col-xs-12 align-Resp">
            <div id="" class=" col-sm-12 col-xs-12 blockStep inline  nav-link" >
                <div id="" class="col-md-2 col-xs-12 txt-AD0" style="text-align: left;">
                     <img src="/img/block-inline.png" class="center-block">
                </div>
                <div id="" class="col-md-10 col-xs-12 txt-AD1">
                    <div id="" class="text-left title-center">
                        Empleados
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="agregarNovedad"></div>
    <div class="col-xs-12" id="employees">
        <div class="cantidadEmpleados"><h1>Mis empleados a la fecha</h1></div>
        <!--<div class="row employeesCount">
            <div class="col-md-4 col-xs-3"><p><b> {{ activeEmp }}</b><br>Empleados <br>activos</p></div>
            <div class="col-md-4 col-xs-3 division-line"><p><b> {{ inactiveEmp }} </b><br>Empleados <br>inactivos</p></div>
            <div class="col-md-4 col-xs-6"><p><b> {{ registerEmp }} </b><br>Empleados en proceso <br>de registro</p></div>
        </div>-->
        <br />
        <div class="row">
            <div class="col-sm-12 col-xs-12">

                {% for employee in employees %}
                    {% set employeeStatus= employee.state %}
                    <div class="row employeeListItem">

                        <div class="col-xxs-5 col-xs-5 col-sm-4 employeeInfo"
                            style="{% if employeeStatus != 1 %} border-left:3px solid #41D0CB {% endif %}">
                            <b>{{ utils.mb_capitalize(employee.fullName) }}</b>
                            {% if employeeStatus > 3 and status >= 2 %}
                                <br />
                                <a class="notAjax addNovelty btn-xs btn-lightBlue" href="/novelty/select/{{ employee.idPayroll }}">Agregar novedad</a>
                            {% endif %}
                        </div>
                        <div class="col-xxs-3 col-xs-3 col-sm-4 employeeStatus">
                            {% if employeeStatus < 1 %}
                                <i class="glyphicon glyphicon-remove-circle"></i> Inactivo
                                <a class="removeEmployee" href="{{ path('remove_employee', {'idEhe':employee.idEmployerHasEmployee  }) }}"><i class="glyphicon glyphicon-trash"></i> Remover</a>
                            {% else %}
                                <p class="estado-empleado"><span class="glyphicon glyphicon-ok-sign"></span> Activo<br>
                                {% if  employee.stateRegister != 100 %}
                                    <a class="removeEmployee"  href="{{ path('remove_employee', {'idEhe':employee.idEmployerHasEmployee  }) }}"><i class="glyphicon glyphicon-trash"></i> Remover</a></p>
                                {% endif %}
                            {% endif %}

                        </div>
                        <div class="col-xxs-4 col-xs-4 col-sm-4 actionButton">
                            {% if employeeStatus <= 2 %}
                                <a href="/register/employee/{{employee.idEmployee}}">Editar</a>
                            {% else %}
                                <!--<a href="{{ path('final_liquidation', { 'id': employee.idEmployerHasEmployee }) }}">Liquidacion</a>
                                /-->
                                <a href="/manage/employee/{{employee.idEmployee}}">Ver detalles <span class="fa fa-angle-right"></span></a>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <div class="col-sm-12 col-xs-12 bigAddLink text-right">
        <a href="/register/employee">
            <i class="fa fa-plus-circle"></i> Agregar empleado nuevo
        </a>
    </div>

    <!-- Modal Delete -->
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">Advertencia Borrando</h4>
                </div>
                <div class="modal-body">
                    Si decides borrar a este empleado no podrás verlo denuevo en tus listas, no podras generar reportes, ni acceder a la información de contratación antigua,
                    sin embargo ingresando el numero de identificación y el apellido en los formularios de registro obtendras todos los datos básicos de tu empleado para contratarlo denuevo
                    <p>Al presionar Borrar acepta haber recibido esta información</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    <a id="btn-erase" href="" class="btn btn-danger">Borrar</a>
                </div>
            </div>
        </div>
    </div>








{% endblock fos_user_content %}
