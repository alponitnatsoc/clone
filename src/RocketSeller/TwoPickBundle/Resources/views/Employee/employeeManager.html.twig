{% extends "::base.html.twig" %}
{% block fos_user_content %}
    {% if app.user.status is defined%}
        {% set status = app.user.status %}
    {% else %}
        {% set status = 0 %}
    {% endif %}
    <div class="col-sm-12 col-xs-12 align-Resp">
        <a id="" class="btn col-sm-12 col-xs-12 blockStep inline  nav-link" href="/register/edit">
            <div id="" class="col-md-2 col-xs-12 txt-AD0" style="text-align: left;">
                 <img src="/img/block-inline.png" class="center-block">                    
            </div>
            <div id="" class="col-md-10 col-xs-12 txt-AD1">
                <div id="" class="text-left">
                    Mis empleados
                </div>
            </div>
        </a>
    </div>
    <div id="agregarNovedad"></div>
    <div class="col-xs-12" id="employees">
        <div class="col-sm-12 col-xs-12">

            {% for employee in employees %}
                {% set employeeStatus= employee.state %}
                <div class="row employeeListItem">
                    <div class="col-xs-6 employeeInfo" 
                        style="{% if employeeStatus != 1 %}border-left:10px solid #ccc{% endif %}">
                        <b>{{ employee.fullName }}</b>&nbsp;
                        {% if employeeStatus == 1 and status >= 2 %}
                            <a class="notAjax addNovelty" href="/novelty/select/{{ employee.idPayroll }}">
                                Agregar Novedad
                            </a>
                        {% endif %}
                    </div>
                    <div class="col-xs-3 employeeStatus">
                        {% if employeeStatus != 1 %}
                            <i class="glyphicon glyphicon-remove-circle"></i> Inactivo
                            <a class="removeEmployee" href="{{ path('remove_employee', {'idEhe':employee.idEmployerHasEmployee  }) }}"><i class="glyphicon glyphicon-trash"></i> Remover</a>
                        {% else %}
                            <i class="glyphicon glyphicon-ok-sign"></i> Activo
                            {% if  employee.stateRegister != 100 %}
                                <a class="removeEmployee"  href="{{ path('remove_employee', {'idEhe':employee.idEmployerHasEmployee  }) }}"><i class="glyphicon glyphicon-trash"></i> Remover</a>
                            {% endif %}
                        {% endif %}

                    </div>
                    <div class="col-xs-3 actionButton">
                        {% if status < 2 %}
                            <a href="/register/employee/{{employee.idEmployee}}">Editar</a>
                        {% else %}
                            <a href="{{ path('final_liquidation', { 'id': employee.idEmployerHasEmployee }) }}">Liquidacion</a>
                            /
                            <a href="/manage/employee/{{employee.idEmployee}}">Ver detalles</a>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}                
        </div>
    </div>
    <div class="col-sm-12 col-xs-12 wizardAddLink text-right">
        <a href="/register/employee">
            <i class="fa fa-plus-circle"></i> Agregar empleado nuevo
        </a>
    </div>

    <!-- Modal Delete -->
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">Advertencia Borrando</h4>
                </div>
                <div class="modal-body">
                    Si decides borrar a este empleado no podrás verlo denuevo en tus listas, no podras generar reportes, ni acceder a la información de contratación antigua,
                    sin embargo ingresando el numero de identificación y el apellido en los formularios de registro obtendras todos los datos básicos de tu empleado para contratarlo denuevo
                    <p>Al presionar Borrar acepta haber recibido esta información</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    <a id="btn-erase" href="" class="btn btn-danger">Borrar</a>
                </div>
            </div>
        </div>
    </div>








{% endblock fos_user_content %}